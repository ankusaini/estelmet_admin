<div class="row">
    <div class="col-md-12">
      <app-card [hidHeader]="true" cardClass="tab-card">
        <h5 class="mb-3">LOT Approval System</h5>
        <ngb-tabset type="pills" (tabChange)="onTabChange($event)">
          <ngb-tab title="Pending" id="pendingTab" class="mb-3">
            <ng-template ngbTabContent>
              <div *ngIf="pendingList" class="dt-responsive table-responsive" cardClass="card-datatable">
                <table datatable class="table table-striped table-bordered table-hover" style="width: 100%;">
                  <thead>
                    <tr>
                      <th>Status</th>
                      <th>Sr. No.</th>
                      <th>LOT ID</th>
                      <th>Type</th>
                      <th>LOT Title</th>
                      <th>Category</th>
                      <th>Shape</th>
                      <th>Company ID</th>
                      <th>Warehouse ID</th>
                      <th>Supplier ID</th>
                      <th>Gross Wt.</th>
                      <th>Net Wt.</th>
                      <th>Date of Creation</th>
                      <th>Last Modified Date</th>
                      <th>Created By</th>
                      <th>Last Modified By</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let purchase of pendingList; let i = index">
                      <td><label class="badge badge-warning">{{purchase?.status}}</label></td>
                      <td>{{i+1}}</td>
                      <td>{{Ids.LOT + '-' + purchase?.id}}</td>
                      <td>{{purchase?.lotType}}</td>
                      <td>{{purchase?.title}}</td>
                      <td>{{purchase?.productCategory}}</td>
                      <td>{{purchase?.productShape}}</td>
                      <td>{{Ids.COMPANY + '-' + purchase.sourceCompanyId}}</td>
                      <td>{{Ids.WAREHOUSE + '-' + purchase.sourceWarehouseId}}</td>
                      <td>{{Ids.SUPPLIER + '-' + purchase.supplierId}}</td>
                      <td>{{purchase?.grossWt}}</td>
                      <td>{{purchase?.netWt}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.createdDate | date: 'medium'}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.lastModifiedDate | date: 'medium'}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.createdBy}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.lastModifiedBy}}</td>
                      <td>
                  <span class="badge badge-light-success">{{purchase.status}}</span>
                  <div class="overlay-edit">
                    <button (click)="addMrToList(purchase)" type="button" class="btn btn-icon btn-success"><i class="feather icon-plus"></i></button>
                  </div>
                </td>
                    </tr>
                    
                  </tbody>
                </table>
              </div>
            </ng-template>
          </ngb-tab>
          <ngb-tab title="Approved" id="approvedTab">
            <ng-template ngbTabContent>
              <div *ngIf="approvedList" class="dt-responsive table-responsive" cardClass="card-datatable">
                <table datatable class="table table-striped table-bordered table-hover" style="width: 100%;">
                  <thead>
                    <tr>
                      <th>Status</th>
                      <th>Sr. No.</th>
                      <th>LOT ID</th>
                      <th>Type</th>
                      <th>LOT Title</th>
                      <th>Category</th>
                      <th>Shape</th>
                      <th>Company ID</th>
                      <th>Warehouse ID</th>
                      <th>Supplier ID</th>
                      <th>Gross Wt.</th>
                      <th>Net Wt.</th>
                      <th>Date of Creation</th>
                      <th>Last Modified Date</th>
                      <th>Created By</th>
                      <th>Last Modified By</th>
                       <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let purchase of approvedList; let i = index">
                      <td><label class="badge badge-success">{{purchase?.status}}</label></td>
                      <td>{{i+1}}</td>
                      <td>{{Ids.LOT + '-' + purchase?.id}}</td>
                      <td>{{purchase?.lotType}}</td>
                      <td>{{purchase?.title}}</td>
                      <td>{{purchase?.productCategory}}</td>
                      <td>{{purchase?.productShape}}</td>
                      <td>{{Ids.COMPANY + '-' + purchase.sourceCompanyId}}</td>
                      <td>{{Ids.WAREHOUSE + '-' + purchase.sourceWarehouseId}}</td>
                      <td>{{Ids.SUPPLIER + '-' + purchase.supplierId}}</td>
                      <td>{{purchase?.grossWt}}</td>
                      <td>{{purchase?.netWt}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.createdDate | date: 'medium'}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.lastModifiedDate | date: 'medium'}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.createdBy}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.lastModifiedBy}}</td>
                       <td>
                  <span class="badge badge-light-success">{{purchase.status}}</span>
                  <div class="overlay-edit">
                    <button (click)="addMrToList(purchase)" type="button" class="btn btn-icon btn-success"><i class="feather icon-plus"></i></button>
                  </div>
                </td>
                    </tr>
                    
                  </tbody>
                </table>
              </div>
            </ng-template>
          </ngb-tab>
          <ngb-tab title="Rejected" id="rejectedTab">
            <ng-template ngbTabContent>
              <div *ngIf="rejectedList" class="dt-responsive table-responsive" cardClass="card-datatable">
                <table datatable class="table table-striped table-bordered table-hover" style="width: 100%;">
                  <thead>
                    <tr>
                      <th>Status</th>
                      <th>Sr. No.</th>
                      <th>LOT ID</th>
                      <th>Type</th>
                      <th>LOT Title</th>
                      <th>Category</th>
                      <th>Shape</th>
                      <th>Company ID</th>
                      <th>Warehouse ID</th>
                      <th>Supplier ID</th>
                      <th>Gross Wt.</th>
                      <th>Net Wt.</th>
                      <th>Date of Creation</th>
                      <th>Last Modified Date</th>
                      <th>Created By</th>
                      <th>Last Modified By</th>
                       <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let purchase of rejectedList; let i = index">
                      <td><label class="badge badge-danger">{{purchase?.status}}</label></td>
                      <td>{{i+1}}</td>
                      <td>{{Ids.LOT + '-' + purchase?.id}}</td>
                      <td>{{purchase?.lotType}}</td>
                      <td>{{purchase?.title}}</td>
                      <td>{{purchase?.productCategory}}</td>
                      <td>{{purchase?.productShape}}</td>
                      <td>{{Ids.COMPANY + '-' + purchase.sourceCompanyId}}</td>
                    <td>{{Ids.WAREHOUSE + '-' + purchase.sourceWarehouseId}}</td>
                    <td>{{Ids.SUPPLIER + '-' + purchase.supplierId}}</td>
                      <td>{{purchase?.grossWt}}</td>
                      <td>{{purchase?.netWt}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.createdDate | date: 'medium'}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.lastModifiedDate | date: 'medium'}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.createdBy}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.lastModifiedBy}}</td>
                       <td>
                  <span class="badge badge-light-success">{{purchase.status}}</span>
                  <div class="overlay-edit">
                    <button (click)="addMrToList(purchase)" type="button" class="btn btn-icon btn-success"><i class="feather icon-plus"></i></button>
                  </div>
                </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </ng-template>
          </ngb-tab>
  
        </ngb-tabset>
  
      </app-card>
      <!-- <app-add-product-cart></app-add-product-cart> -->
    </div>
  </div>


  
<div class="row">
    <div class="col-md-12">
        <app-card [hidHeader]="false" cardTitle="Take action on above Selected Users" [options]="false" cardClass="user-profile-list">
            <div class="dt-responsive table-responsive" cardClass="card-datatable">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                     <tr>
                      <th>Status</th>
                      <th>Sr. No.</th>
                      <th>LOT ID</th>
                      <th>Type</th>
                      <th>LOT Title</th>
                      <th>Category</th>
                      <th>Shape</th>
                      <th>Company ID</th>
                      <th>Warehouse ID</th>
                      <th>Supplier ID</th>
                      <th>Gross Wt.</th>
                      <th>Net Wt.</th>
                      <th>Date of Creation</th>
                      <th>Last Modified Date</th>
                      <th>Created By</th>
                      <th>Last Modified By</th>
                      <th>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                         <tr *ngFor="let purchase of selectedLotList; let i = index">
                      <td><label class="badge badge-danger">{{purchase?.status}}</label></td>
                      <td>{{i+1}}</td>
                      <td>{{Ids.LOT + '-' + purchase?.id}}</td>
                      <td>{{purchase?.lotType}}</td>
                      <td>{{purchase?.title}}</td>
                      <td>{{purchase?.productCategory}}</td>
                      <td>{{purchase?.productShape}}</td>
                      <td>{{Ids.COMPANY + '-' + purchase.sourceCompanyId}}</td>
                    <td>{{Ids.WAREHOUSE + '-' + purchase.sourceWarehouseId}}</td>
                    <td>{{Ids.SUPPLIER + '-' + purchase.supplierId}}</td>
                      <td>{{purchase?.grossWt}}</td>
                      <td>{{purchase?.netWt}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.createdDate | date: 'medium'}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.lastModifiedDate | date: 'medium'}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.createdBy}}</td>
                      <td>{{purchase?.purchaseHistory[0]?.lastModifiedBy}}</td>
                      <td>
                  <span class="badge badge-light-success">{{purchase.status}}</span>
                  <div class="overlay-edit">
                    <button (click)="removeSelectedUserd(purchase)" type="button" class="btn btn-icon btn-danger"><i class="feather icon-trash"></i></button>
                  </div>
                </td>
                    </tr>

                    </tbody>

                </table>
            </div>
        </app-card>

    </div>
</div>


<div class="col-sm-12 centered-content m-t-20">
    <div class="btn-group mt-10">
           <button (click)="changeStatusOfSelectedMR('APPROVED')" *ngIf="selectedTab=='PENDING' || selectedTab =='REJECTED'" type="button" class="btn btn-success active">Approve</button>&nbsp;
         <div  *ngxPermissionsOnly="['PURCHASE_DELETE_PRIVILEGE']">

           <button (click)="changeStatusOfSelectedMR('REJECTED')" *ngIf="selectedTab=='PENDING' || selectedTab =='APPROVED'" type="button" class="btn btn-danger active">Reject</button>&nbsp;
         </div>
    </div>
</div>
